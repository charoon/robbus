#summary Robbus client for Arduino platform.
#labels Featured

= Introduction =

This is mostly full-featured (no runtime address change option yet) implementation of Robbus protocol for 8-bit Arduino platform (32-bit may work as well but has not been tested yet).

= Known limitations =

Currently only devices with one serial are supported by packaged version. If you need to run on device with more serial ports, go to libraries/Robbus/Robbus.cpp and replace all occurences of Serial with SerialX (Serial1, Serial2,... - the port yuo want to link to Robbus).   

= Installation instructions =
 * download the package
 * unpack to <arduino install>/libraries
 * start Arduino gui
 * open the example or write your own code

= Usage =

Following code is commented example of minimum Robbus client implementation. You can use it as skeleton for your application.

{{{
// include the definition (this is necessary to use Robbus)
#include <Robbus.h>

// declare output data array (application-level code can modify it as needed)
// the length must match the output data length
byte outData[2];      

// message handler 
// it will be called on reception of Robbus message
// the parameter is pointer to received data (the length will match incoming data length)
// the return value is pointer to data which will be sent back to master
byte* robbusHandler(byte* data)  
{
  outData[0] = 'K';     // write some output data
  outData[1] = data[0]; // (you can change the data anywhere in the code)
  return outData;       // and return pointer to data to be sent 
}

void setup()
{
  // initialize and start Robbus client code
  // the parameters are:
  // * node address (value between 4 and 127)
  // * incoming data length
  // * outgoing data length
  // * pointer to handler function
  Robbus.begin('a', 1, 2, robbusHandler);  
}

void loop()
{
  // process function MUST be called in the loop otherwise the messages from Robbus will not be processed 
  Robbus.process();
}
}}}